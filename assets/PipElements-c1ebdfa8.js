var a=Object.defineProperty;var r=(i,t,e)=>t in i?a(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var s=(i,t,e)=>(r(i,typeof t!="symbol"?t+"":t,e),e);class c{constructor(){s(this,"canvas");s(this,"ctx");s(this,"captureStream");s(this,"video",document.createElement("video"));this.canvas=document.createElement("canvas"),this.captureStream=this.canvas.captureStream();const t=this.canvas.getContext("bitmaprenderer");if(!t)throw new Error("Cannot initialize canvas context");this.ctx=t,this.video.srcObject=this.captureStream}resize(t,e){this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=this.video.width=t,this.canvas.height=this.video.height=e)}update(t){this.resize(t.width,t.height),this.ctx.transferFromImageBitmap(t.transferToImageBitmap())}togglePip(){document.pictureInPictureElement?document.exitPictureInPicture():(this.video.play(),this.video.requestPictureInPicture())}}const h=new c;export{h as p};
